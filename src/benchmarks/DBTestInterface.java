package benchmarks;

import tools.*;

public abstract class DBTestInterface {
	
	private static final int NUM_PEOPLE = 200;
	private static final int NUM_TRANSACTIONS = 300;

	// create the database with default or input file
	public abstract void create();
	public abstract void create(String file);
	
	
	//Database Set Up Functions
	/**
	 * Create people and transaction tables
	 * 		people (int id PRIMARy KEY, String name, int age, String gender, String color)
	 * 		
	 */
	
	/**
	 * DELETE * FROM people
	 * DELETE * FROM transaction
	**/
	public abstract void reset();
	
	/**
	 * DROP TABLE people;
	 * DROP TABLE transaction;
	 */
	public abstract void delete();
	
	
	
	/**
	 * INSERT INTO people VALUES(?,?,?,?,?)
	**/
	public void insertPeopleRecord(int id,String name,int age,String gender,String color) {
		insertPeopleRecord(new PeopleRow(id,name,age,gender,color));
	}
	
	//automatic id based on the current number of people
	public void insertPeopleRecord(String name,int age,String gender,String color) {
		insertPeopleRecord(new PeopleRow(name,age,gender,color));
	}
	
	public abstract void insertPeopleRecord(PeopleRow row);
	
	
	/**
	 * 
	 * INSERT INTO transaction VALUES(id,price,item,buyer,seller,date)
	 * buyer and seller are autogenerated
	**/
	public void insertTransactionRecord(int id, float price,String item,String date) {
		insertTransactionRecord(new TransactionRow(id,price,item,date));
	}
	
	//automatic id based on current number of transactions
	public void insertTransactionRecord(float price,String item,String date) {
		insertTransactionRecord(new TransactionRow(price,item,date));
	}
	
	/**
	 * Insert the given number of people and transactions
	 * @param people
	 * @param transactions
	 */
	public void insertAll(int people, int transactions) {
		for(int i=0; i<people; i++) this.insertPeopleRecord(new PeopleRow());
		for(int i=0; i<transactions; i++) this.insertTransactionRecord(new TransactionRow());
	}
	
	public void insert() {
		this.insertAll(DBTestInterface.NUM_PEOPLE, DBTestInterface.NUM_TRANSACTIONS);
	}
	
	/**
	 * Abstract transaction record insert from transaction row
	 */
	public abstract void insertTransactionRecord(TransactionRow row);
	
	/**
	DELETE * FROM people WHERE id=?
	**/
	public abstract boolean deletePeopleRecord(int id);
	
	/**
	DELETE * FROM transaction WHERE transactionid=?
	**/
	public abstract boolean deleteTransactionRecord(int id);
	
	
	/**
	 * Select Test 1: look up by primary key.
	 * 
	SELECT * FROM people WHERE id=?
	* @return number of rows selected
	**/
	public abstract int selectTest1(int id);
	
	/**
	 * Select Test 2: look up by non primary key.
	 * 
	SELECT * FROM people WHERE name=?
	* @return number of rows selected
	**/
	public abstract int selectTest2(String name);
	
	
	/**
	 * Select Test 3: range lookup
	 * 
	SELECT * FROM people WHERE ?<age AND age>?
	**/
	public abstract int selectTest3(int startAge,int endAge);
	
	/**
	 * Select Test 4: group by
	 * 
	SELECT age,count(*) FROM people GROUP BY age
	* @return number of rows selected
	**/
	public abstract int selectTest4();
	
	/**
	 * Select Test 5: group by, aggragate
	 * 
	SELECT buyer,sum(price) FROM people GROUP BY transactionid,buyer
	* @return number of rows selected
	**/
	public abstract int selectTest5();
	
	/**
	 * Select Test 6: basic join
	 * 
	SELECT p.name,p.age,t.transactionid FROM people p,transaction t WHERE p.id=t.buyer AND p.age>?
	* @return number of rows selected
	**/
	public abstract int selectTest6(int age);
}
